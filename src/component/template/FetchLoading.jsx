import React, { useEffect, useState } from 'react';
import { Img } from '../../assets/image';
import Stars from './Stars';

const FetchLoading = ({ firstLoading, setLoading, vRate }) => {
    const [rocketPos, setRocketPos] = useState(window.innerHeight / 2);
    const vh = window.innerHeight * vRate / 100;

    useEffect(() => {
        if (!firstLoading) {
            const loadingInterval = setInterval(() => {
                setRocketPos((prevPos) => {
                    if (prevPos < 0) {
                        clearInterval(loadingInterval);
                        setLoading(false);
                    }
                    return prevPos - vh;
                });
            }, 1);
        }
    }, [firstLoading])
    return (
        <div className="fixed flex flex-col items-center top-0 right-0 w-full justify-center h-screen bg-layout z-10">
            <img
                src={Img.spaceFog}
                alt="spaceFog"
                width={589}
                height={1081}
                className={`max-w-[589px] h-[1081px] fixed -top-[170px]`}
            />
            <Stars />
            <svg width="53" height="92" viewBox="0 0 53 92" fill="none" xmlns="http://www.w3.org/2000/svg" className={`${firstLoading && "animate-sparkle"} fixed transform -translate-y-1/2`} style={{ top: `${rocketPos}px` }}>
                <g filter="url(#filter0_f_2748_8706)">
                    <path d="M34.5 64.5002C34.5 73.0606 30.9183 90.0002 26.5 90.0002C22.0817 90.0002 18.5 73.0606 18.5 64.5002C18.5 55.9398 22.0817 59.0002 26.5 59.0002C30.9183 59.0002 34.5 55.9398 34.5 64.5002Z" fill="url(#paint0_linear_2748_8706)" />
                </g>
                <g filter="url(#filter1_f_2748_8706)">
                    <path d="M29.5 65.713C29.5 69.9936 28.1569 79 26.5 79C24.8431 79 23.5 69.9936 23.5 65.713C23.5 61.4323 24.8431 63.4985 26.5 63.4985C28.1569 63.4985 29.5 61.4323 29.5 65.713Z" fill="url(#paint1_linear_2748_8706)" />
                </g>
                <g filter="url(#filter2_f_2748_8706)">
                    <path d="M28.5 64.6956C28.5 67.371 27.6046 73 26.5 73C25.3954 73 24.5 67.371 24.5 64.6956C24.5 62.0202 25.3954 63.3115 26.5 63.3115C27.6046 63.3115 28.5 62.0202 28.5 64.6956Z" fill="url(#paint2_linear_2748_8706)" />
                </g>
                <g clipPath="url(#clip0_2748_8706)">
                    <path d="M22.737 55.5201C18.9785 50.6375 16.9167 45.7314 16.0515 39.6125C15.9577 38.949 15.517 38.386 14.8955 38.1358C14.2739 37.8855 13.5662 37.9858 13.0388 38.3989C12.9263 38.4871 10.2485 40.6045 7.38317 44.5754C4.74805 48.2272 1.42868 54.2319 0.580805 62.099C0.513555 62.7235 0.76343 63.3403 1.24655 63.7418C1.7353 64.1482 2.19493 64.3086 3.19493 63.7418C4.19493 63.1751 6.50001 56 13.5 56C20.5 56 22.5 58 23.0359 57.2388C23.5718 56.4777 23.1134 56.009 22.737 55.5201Z" fill="#FC495C" />
                    <path d="M30.263 55.5201C34.0215 50.6375 36.0833 45.7314 36.9485 39.6125C37.0423 38.949 37.483 38.386 38.1045 38.1358C38.7261 37.8855 39.4338 37.9858 39.9612 38.3989C40.0737 38.4871 42.7515 40.6045 45.6168 44.5754C48.252 48.2272 51.5713 54.2319 52.4192 62.099C52.4864 62.7235 52.2366 63.3403 51.7534 63.7418C51.2647 64.1482 50.8051 64.3086 49.8051 63.7418C48.8051 63.1751 46.5 56 39.5 56C32.5 56 30.5 58 29.9641 57.2388C29.4282 56.4777 29.8866 56.009 30.263 55.5201Z" fill="url(#paint3_linear_2748_8706)" />
                    <path d="M40.8749 31.9999C40.8749 39.3674 39.7624 45.2124 37.3724 50.3937C35.0387 55.4536 31.6999 59.3924 28.3749 62.8786C28.1999 63.0624 28.0237 63.2461 27.8487 63.4274C27.4962 63.7936 27.0087 63.9999 26.4999 63.9999C25.9912 63.9999 25.5037 63.7924 25.1512 63.4274C24.9724 63.2424 24.7974 63.0599 24.6249 62.8786C22.7837 60.9436 21.325 59.2636 20.07 57.6324C15.895 52.2074 13.6037 46.7587 12.6437 39.9624C12.295 37.5012 12.125 34.8962 12.125 31.9999C12.125 20.4387 16.7512 9.27748 25.1512 0.572499C25.5037 0.20625 25.9912 0 26.4999 0C27.0087 0 27.4962 0.20625 27.8487 0.572499C36.2487 9.27748 40.8749 20.4387 40.8749 31.9999Z" fill="url(#paint4_linear_2748_8706)" />
                    <path d="M32.9518 24.5453C32.0389 23.171 29.0354 21.8584 26.4999 21.8584C23.9644 21.8584 20.9608 23.171 20.0481 24.5453C19.1856 23.9723 18.9508 22.8085 19.5237 21.9459C21.1199 19.5429 23.7278 18.1084 26.4999 18.1084C29.2721 18.1084 31.88 19.543 33.4762 21.9459C34.049 22.8085 33.8143 23.9723 32.9518 24.5453Z" fill="url(#paint5_linear_2748_8706)" />
                    <path d="M24.574 40.9986C24.5336 39.907 25.4076 39 26.5 39C27.5924 39 28.4664 39.907 28.426 40.9986L27.537 65.0007C27.5164 65.5585 27.0582 66 26.5 66C25.9418 66 25.4836 65.5585 25.463 65.0007L24.574 40.9986Z" fill="url(#paint6_linear_2748_8706)" />
                </g>
                <defs>
                    <filter id="filter0_f_2748_8706" x="16.5" y="56.4683" width="20" height="35.5317" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
                        <feFlood floodOpacity="0" result="BackgroundImageFix" />
                        <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
                        <feGaussianBlur stdDeviation="1" result="effect1_foregroundBlur_2748_8706" />
                    </filter>
                    <filter id="filter1_f_2748_8706" x="22.5" y="62" width="8" height="18" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
                        <feFlood floodOpacity="0" result="BackgroundImageFix" />
                        <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
                        <feGaussianBlur stdDeviation="0.5" result="effect1_foregroundBlur_2748_8706" />
                    </filter>
                    <filter id="filter2_f_2748_8706" x="23.5" y="62" width="6" height="12" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
                        <feFlood floodOpacity="0" result="BackgroundImageFix" />
                        <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
                        <feGaussianBlur stdDeviation="0.5" result="effect1_foregroundBlur_2748_8706" />
                    </filter>
                    <linearGradient id="paint0_linear_2748_8706" x1="26.5" y1="43.5002" x2="26.5" y2="86.0002" gradientUnits="userSpaceOnUse">
                        <stop stopColor="white" />
                        <stop offset="1" stopColor="white" stopOpacity="0" />
                    </linearGradient>
                    <linearGradient id="paint1_linear_2748_8706" x1="26.5" y1="63" x2="26.5" y2="75.7334" gradientUnits="userSpaceOnUse">
                        <stop stopColor="#FAD557" />
                        <stop offset="1" stopColor="white" stopOpacity="0" />
                    </linearGradient>
                    <linearGradient id="paint2_linear_2748_8706" x1="26.5" y1="63" x2="26.5" y2="70.5831" gradientUnits="userSpaceOnUse">
                        <stop stopColor="#FC495C" />
                        <stop offset="1" stopColor="#FAD557" stopOpacity="0" />
                    </linearGradient>
                    <linearGradient id="paint3_linear_2748_8706" x1="32.866" y1="43.5" x2="52.3589" y2="64.1325" gradientUnits="userSpaceOnUse">
                        <stop stopColor="#E2395A" />
                        <stop offset="1" stopColor="#7C1F31" />
                    </linearGradient>
                    <linearGradient id="paint4_linear_2748_8706" x1="12.5" y1="32" x2="40.5" y2="32" gradientUnits="userSpaceOnUse">
                        <stop offset="0.287523" stopColor="#FD6B82" />
                        <stop offset="1" stopColor="#B84150" />
                    </linearGradient>
                    <linearGradient id="paint5_linear_2748_8706" x1="26.5" y1="18.0001" x2="33" y2="24.5001" gradientUnits="userSpaceOnUse">
                        <stop stopColor="#FAD557" />
                        <stop offset="1" stopColor="#FF8909" />
                    </linearGradient>
                    <linearGradient id="paint6_linear_2748_8706" x1="24.5" y1="53" x2="28.5" y2="53" gradientUnits="userSpaceOnUse">
                        <stop stopColor="#FC495C" />
                        <stop offset="1" stopColor="#842235" />
                    </linearGradient>
                    <clipPath id="clip0_2748_8706">
                        <rect width="52" height="84" fill="white" transform="translate(0.5)" />
                    </clipPath>
                </defs>
            </svg>
            <svg width="45" height="8" viewBox="0 0 45 8" fill="none" xmlns="http://www.w3.org/2000/svg" className={`fixed ${!firstLoading && "hidden"}`} style={{ top: window.innerHeight / 2 + 40 }}>
                <path d="M4.83838 6.31006V7H1.63916V6.31006H4.83838ZM1.80615 0.601562V7H0.958008V0.601562H1.80615ZM10.4458 3.59863V4.00293C10.4458 4.4834 10.3857 4.91406 10.2656 5.29492C10.1455 5.67578 9.97266 5.99951 9.74707 6.26611C9.52148 6.53271 9.25049 6.73633 8.93408 6.87695C8.62061 7.01758 8.26904 7.08789 7.87939 7.08789C7.50146 7.08789 7.1543 7.01758 6.83789 6.87695C6.52441 6.73633 6.25195 6.53271 6.02051 6.26611C5.79199 5.99951 5.61475 5.67578 5.48877 5.29492C5.36279 4.91406 5.2998 4.4834 5.2998 4.00293V3.59863C5.2998 3.11816 5.36133 2.68896 5.48438 2.31104C5.61035 1.93018 5.7876 1.60645 6.01611 1.33984C6.24463 1.07031 6.51562 0.865234 6.8291 0.724609C7.14551 0.583984 7.49268 0.513672 7.87061 0.513672C8.26025 0.513672 8.61182 0.583984 8.92529 0.724609C9.2417 0.865234 9.5127 1.07031 9.73828 1.33984C9.9668 1.60645 10.1411 1.93018 10.2612 2.31104C10.3843 2.68896 10.4458 3.11816 10.4458 3.59863ZM9.60645 4.00293V3.58984C9.60645 3.20898 9.56689 2.87207 9.48779 2.5791C9.41162 2.28613 9.29883 2.04004 9.14941 1.84082C9 1.6416 8.81689 1.49072 8.6001 1.38818C8.38623 1.28564 8.14307 1.23438 7.87061 1.23438C7.60693 1.23438 7.36816 1.28564 7.1543 1.38818C6.94336 1.49072 6.76172 1.6416 6.60938 1.84082C6.45996 2.04004 6.34424 2.28613 6.26221 2.5791C6.18018 2.87207 6.13916 3.20898 6.13916 3.58984V4.00293C6.13916 4.38672 6.18018 4.72656 6.26221 5.02246C6.34424 5.31543 6.46143 5.56299 6.61377 5.76514C6.76904 5.96436 6.95215 6.11523 7.16309 6.21777C7.37695 6.32031 7.61572 6.37158 7.87939 6.37158C8.15479 6.37158 8.39941 6.32031 8.61328 6.21777C8.82715 6.11523 9.00732 5.96436 9.15381 5.76514C9.30322 5.56299 9.41602 5.31543 9.49219 5.02246C9.56836 4.72656 9.60645 4.38672 9.60645 4.00293ZM13.9878 1.16846L11.8696 7H11.0039L13.4429 0.601562H14.001L13.9878 1.16846ZM15.7632 7L13.6406 1.16846L13.6274 0.601562H14.1855L16.6333 7H15.7632ZM15.6533 4.63135V5.32568H12.0586V4.63135H15.6533ZM19.2217 7H17.8857L17.8945 6.31006H19.2217C19.6787 6.31006 20.0596 6.21484 20.3643 6.02441C20.6689 5.83105 20.8975 5.56152 21.0498 5.21582C21.2051 4.86719 21.2827 4.45996 21.2827 3.99414V3.60303C21.2827 3.23682 21.2388 2.91162 21.1509 2.62744C21.063 2.34033 20.9341 2.09863 20.7642 1.90234C20.5942 1.70313 20.3862 1.55225 20.1401 1.44971C19.897 1.34717 19.6172 1.2959 19.3008 1.2959H17.8594V0.601562H19.3008C19.7197 0.601562 20.1021 0.671875 20.4478 0.8125C20.7935 0.950195 21.0908 1.15088 21.3398 1.41455C21.5918 1.67529 21.7852 1.9917 21.9199 2.36377C22.0547 2.73291 22.1221 3.14893 22.1221 3.61182V3.99414C22.1221 4.45703 22.0547 4.87451 21.9199 5.24658C21.7852 5.61572 21.5903 5.93066 21.3354 6.19141C21.0835 6.45215 20.7788 6.65283 20.4214 6.79346C20.0669 6.93115 19.667 7 19.2217 7ZM18.3384 0.601562V7H17.4902V0.601562H18.3384ZM24.3062 0.601562V7H23.458V0.601562H24.3062ZM30.7705 0.601562V7H29.918L26.6968 2.06494V7H25.8486V0.601562H26.6968L29.9312 5.5498V0.601562H30.7705ZM37.002 3.81396V6.15625C36.9229 6.27344 36.7969 6.40527 36.624 6.55176C36.4512 6.69531 36.2124 6.82129 35.9077 6.92969C35.606 7.03516 35.2163 7.08789 34.7388 7.08789C34.3491 7.08789 33.9902 7.02051 33.6621 6.88574C33.3369 6.74805 33.0542 6.54883 32.814 6.28809C32.5767 6.02441 32.3921 5.70508 32.2603 5.33008C32.1313 4.95215 32.0669 4.52441 32.0669 4.04688V3.55029C32.0669 3.07275 32.1226 2.64648 32.2339 2.27148C32.3481 1.89648 32.5151 1.57861 32.7349 1.31787C32.9546 1.0542 33.2241 0.85498 33.5435 0.720215C33.8628 0.58252 34.229 0.513672 34.6421 0.513672C35.1313 0.513672 35.54 0.598633 35.8682 0.768555C36.1992 0.935547 36.457 1.16699 36.6416 1.46289C36.8291 1.75879 36.9492 2.0957 37.002 2.47363H36.1538C36.1157 2.24219 36.0396 2.03125 35.9253 1.84082C35.814 1.65039 35.6543 1.49805 35.4463 1.38379C35.2383 1.2666 34.9702 1.20801 34.6421 1.20801C34.3462 1.20801 34.0898 1.26221 33.873 1.37061C33.6562 1.479 33.4775 1.63428 33.3369 1.83643C33.1963 2.03857 33.0908 2.2832 33.0205 2.57031C32.9531 2.85742 32.9194 3.18115 32.9194 3.5415V4.04688C32.9194 4.41602 32.9619 4.74561 33.0469 5.03564C33.1348 5.32568 33.2593 5.57324 33.4204 5.77832C33.5815 5.98047 33.7734 6.13428 33.9961 6.23975C34.2217 6.34521 34.4707 6.39795 34.7432 6.39795C35.0449 6.39795 35.2896 6.37305 35.4771 6.32324C35.6646 6.27051 35.811 6.20898 35.9165 6.13867C36.022 6.06543 36.1025 5.99658 36.1582 5.93213V4.49951H34.6772V3.81396H37.002ZM38.2983 6.56934C38.2983 6.43164 38.3408 6.31592 38.4258 6.22217C38.5137 6.12549 38.6396 6.07715 38.8037 6.07715C38.9678 6.07715 39.0923 6.12549 39.1772 6.22217C39.2651 6.31592 39.3091 6.43164 39.3091 6.56934C39.3091 6.7041 39.2651 6.81836 39.1772 6.91211C39.0923 7.00586 38.9678 7.05273 38.8037 7.05273C38.6396 7.05273 38.5137 7.00586 38.4258 6.91211C38.3408 6.81836 38.2983 6.7041 38.2983 6.56934ZM40.6714 6.56934C40.6714 6.43164 40.7139 6.31592 40.7988 6.22217C40.8867 6.12549 41.0127 6.07715 41.1768 6.07715C41.3408 6.07715 41.4653 6.12549 41.5503 6.22217C41.6382 6.31592 41.6821 6.43164 41.6821 6.56934C41.6821 6.7041 41.6382 6.81836 41.5503 6.91211C41.4653 7.00586 41.3408 7.05273 41.1768 7.05273C41.0127 7.05273 40.8867 7.00586 40.7988 6.91211C40.7139 6.81836 40.6714 6.7041 40.6714 6.56934ZM43.0444 6.56934C43.0444 6.43164 43.0869 6.31592 43.1719 6.22217C43.2598 6.12549 43.3857 6.07715 43.5498 6.07715C43.7139 6.07715 43.8384 6.12549 43.9233 6.22217C44.0112 6.31592 44.0552 6.43164 44.0552 6.56934C44.0552 6.7041 44.0112 6.81836 43.9233 6.91211C43.8384 7.00586 43.7139 7.05273 43.5498 7.05273C43.3857 7.05273 43.2598 7.00586 43.1719 6.91211C43.0869 6.81836 43.0444 6.7041 43.0444 6.56934Z" fill="white" fillOpacity="0.8" />
            </svg>
        </div>
    );
};

export default FetchLoading;